<accordion-header [title]="title" (click)="visible=!visible" [sub]="sub" [disabled]="!isEnabled"></accordion-header>
<div class="sub-panel" [ngClass]="{'visible': visible}">
  <div class="distribute-equally" *ngFor="let levelOptions of availableOptions; let level = index">
    <ng-container *ngIf="!(level==availableOptions.length-1 && hasDropDown); else dropdown">
      <button class="lighter" (click)="updateActiveOption(level, option)" *ngFor="let option of levelOptions"
              [ngClass]="{'active': activeOptions[level]==option}"
              [disabled]="!isAllowed(level, option)">{{option}}</button>
    </ng-container>
  </div>
  <div class="distribute-equally" *ngIf="!hasDropDown">
    <button class="lighter">Zoom in</button>
    <button class="lighter" *ngIf="hasData" (click)="downloadData()">Download data</button>
    <button class="lighter">Open in new tab</button>
  </div>

  <img [src]="imageSource">
</div>

<ng-template #dropdown>
  <div class="symmetric">
    <button class="lighter" *ngIf="hasData" (click)="downloadData()">Download data</button>
    <button class="lighter" *ngIf="!hasData">Zoom in</button>
    <button class="lighter" (click)="moveDropdown(-1)"><</button>
    <div class="wrapper">
      <button style="min-width: 280px" class="light" (click)="dropdownVisible=!dropdownVisible"
              [textContent]="activeOptions[activeOptions.length-1]"></button>
      <div class="dropdown" [ngClass]="{'visible': dropdownVisible}">
        <button class="lighter" *ngFor="let option of availableOptions[availableOptions.length-1]"
                [ngClass]="{'active': activeOptions[activeOptions.length-1]==option}"
                [disabled]="!isAllowed(activeOptions.length-1, option)"
                (click)="updateActiveOption(activeOptions.length-1, option)">{{option}}</button>
      </div>
    </div>
    <button class="lighter" (click)="moveDropdown(1)">></button>
    <button class="lighter">Open in new tab</button>
  </div>
</ng-template>
